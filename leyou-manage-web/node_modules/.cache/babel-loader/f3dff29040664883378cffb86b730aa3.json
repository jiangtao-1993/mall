{"remainingRequest":"D:\\heima88\\leyou-manage-web\\node_modules\\babel-loader\\lib\\index.js!D:\\heima88\\leyou-manage-web\\node_modules\\vuetify-loader\\lib\\loader.js!D:\\heima88\\leyou-manage-web\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\heima88\\leyou-manage-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\heima88\\leyou-manage-web\\src\\views\\item\\BrandForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\heima88\\leyou-manage-web\\src\\views\\item\\BrandForm.vue","mtime":1576729628727},{"path":"D:\\heima88\\leyou-manage-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\heima88\\leyou-manage-web\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\heima88\\leyou-manage-web\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1549812933000},{"path":"D:\\heima88\\leyou-manage-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\heima88\\leyou-manage-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _objectWithoutProperties from \"D:\\\\heima88\\\\leyou-manage-web\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/objectWithoutProperties\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  name: \"brand-form\",\n  props: {\n    //props中所有给属性，存在的意义为：等待父组件传值\n    oldBrand: {\n      type: Object\n    },\n    isEdit: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data: function data() {\n    return {\n      valid: false,\n      // 表单校验结果标记\n      brand: {\n        name: '',\n        // 品牌名称\n        letter: '',\n        // 品牌首字母\n        image: '',\n        // 品牌logo\n        categories: [] // 品牌所属的商品分类数组\n\n      },\n      nameRules: [function (v) {\n        return !!v || \"品牌名称不能为空\";\n      }, function (v) {\n        return /^.{2,}$/.test(v) || \"品牌名称至少2位\";\n      }],\n      letterRules: [function (v) {\n        return !!v || \"首字母不能为空\";\n      }, function (v) {\n        return /^[a-zA-Z]$/.test(v) || \"品牌字母只能是1个字母\";\n      }]\n    };\n  },\n  methods: {\n    submit: function submit() {\n      var _this = this;\n\n      // 表单校验\n      if (this.$refs.heima88.validate()) {\n        // 定义一个请求参数对象，通过解构表达式来获取brand中的属性\n        var _this$brand = this.brand,\n            categories = _this$brand.categories,\n            letter = _this$brand.letter,\n            params = _objectWithoutProperties(_this$brand, [\"categories\", \"letter\"]); // 数据库中只要保存分类的id即可，因此我们对categories的值进行处理,只保留id，并转为字符串\n\n\n        params.cids = categories.map(function (c) {\n          return c.id;\n        }).join(\",\"); // 将字母都处理为大写\n\n        params.letter = letter.toUpperCase(); // 将数据提交到后台\n        // this.$http.post('/item/brand', this.$qs.stringify(params))\n\n        this.$http({\n          method: this.isEdit ? 'put' : 'post',\n          url: '/item/brand',\n          data: this.$qs.stringify(params) //this.$qs工具负责把对象转换为查询参数格式\n\n        }).then(function () {\n          // 关闭窗口\n          _this.$emit(\"close\");\n\n          _this.$message.success(\"保存成功！\");\n        }).catch(function () {\n          _this.$message.error(\"保存失败！\");\n        });\n      }\n    },\n    clear: function clear() {\n      // 重置表单\n      this.$refs.heima88.reset(); // 需要手动清空商品分类\n\n      this.categories = [];\n    },\n    close: function close() {\n      //$emit表示调用父传递给子的方法\n      this.$emit(\"close\");\n    }\n  },\n  watch: {\n    oldBrand: {\n      // 监控oldBrand的变化\n      handler: function handler(val) {\n        if (val) {\n          // 注意不要直接复制，否则这边的修改会影响到父组件的数据，copy属性即可\n          this.brand = Object.deepCopy(val); //相当于java中clone\n        } else {\n          // 为空，初始化brand\n          this.brand = {\n            name: '',\n            letter: '',\n            image: '',\n            categories: []\n          };\n          this.$refs.heima88.reset();\n        }\n      },\n      deep: true\n    }\n  }\n};",{"version":3,"sources":["BrandForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgDA,eAAA;AACA,EAAA,IAAA,EAAA,YADA;AAEA,EAAA,KAAA,EAAA;AAAA;AACA,IAAA,QAAA,EAAA;AACA,MAAA,IAAA,EAAA;AADA,KADA;AAIA,IAAA,MAAA,EAAA;AACA,MAAA,IAAA,EAAA,OADA;AAEA,MAAA,OAAA,EAAA;AAFA;AAJA,GAFA;AAWA,EAAA,IAXA,kBAWA;AACA,WAAA;AACA,MAAA,KAAA,EAAA,KADA;AACA;AACA,MAAA,KAAA,EAAA;AACA,QAAA,IAAA,EAAA,EADA;AACA;AACA,QAAA,MAAA,EAAA,EAFA;AAEA;AACA,QAAA,KAAA,EAAA,EAHA;AAGA;AACA,QAAA,UAAA,EAAA,EAJA,CAIA;;AAJA,OAFA;AAQA,MAAA,SAAA,EAAA,CACA,UAAA,CAAA;AAAA,eAAA,CAAA,CAAA,CAAA,IAAA,UAAA;AAAA,OADA,EAEA,UAAA,CAAA;AAAA,eAAA,UAAA,IAAA,CAAA,CAAA,KAAA,UAAA;AAAA,OAFA,CARA;AAYA,MAAA,WAAA,EAAA,CACA,UAAA,CAAA;AAAA,eAAA,CAAA,CAAA,CAAA,IAAA,SAAA;AAAA,OADA,EAEA,UAAA,CAAA;AAAA,eAAA,aAAA,IAAA,CAAA,CAAA,KAAA,aAAA;AAAA,OAFA;AAZA,KAAA;AAiBA,GA7BA;AA8BA,EAAA,OAAA,EAAA;AACA,IAAA,MADA,oBACA;AAAA;;AACA;AACA,UAAA,KAAA,KAAA,CAAA,OAAA,CAAA,QAAA,EAAA,EAAA;AACA;AADA,0BAEA,KAAA,KAFA;AAAA,YAEA,UAFA,eAEA,UAFA;AAAA,YAEA,MAFA,eAEA,MAFA;AAAA,YAEA,MAFA,oEAGA;;;AACA,QAAA,MAAA,CAAA,IAAA,GAAA,UAAA,CAAA,GAAA,CAAA,UAAA,CAAA;AAAA,iBAAA,CAAA,CAAA,EAAA;AAAA,SAAA,EAAA,IAAA,CAAA,GAAA,CAAA,CAJA,CAKA;;AACA,QAAA,MAAA,CAAA,MAAA,GAAA,MAAA,CAAA,WAAA,EAAA,CANA,CAOA;AACA;;AACA,aAAA,KAAA,CAAA;AACA,UAAA,MAAA,EAAA,KAAA,MAAA,GAAA,KAAA,GAAA,MADA;AAEA,UAAA,GAAA,EAAA,aAFA;AAGA,UAAA,IAAA,EAAA,KAAA,GAAA,CAAA,SAAA,CAAA,MAAA,CAHA,CAGA;;AAHA,SAAA,EAIA,IAJA,CAIA,YAAA;AACA;AACA,UAAA,KAAA,CAAA,KAAA,CAAA,OAAA;;AACA,UAAA,KAAA,CAAA,QAAA,CAAA,OAAA,CAAA,OAAA;AACA,SARA,EASA,KATA,CASA,YAAA;AACA,UAAA,KAAA,CAAA,QAAA,CAAA,KAAA,CAAA,OAAA;AACA,SAXA;AAYA;AACA,KAzBA;AA0BA,IAAA,KA1BA,mBA0BA;AACA;AACA,WAAA,KAAA,CAAA,OAAA,CAAA,KAAA,GAFA,CAGA;;AACA,WAAA,UAAA,GAAA,EAAA;AACA,KA/BA;AAgCA,IAAA,KAhCA,mBAgCA;AACA;AACA,WAAA,KAAA,CAAA,OAAA;AACA;AAnCA,GA9BA;AAmEA,EAAA,KAAA,EAAA;AACA,IAAA,QAAA,EAAA;AAAA;AACA,MAAA,OADA,mBACA,GADA,EACA;AACA,YAAA,GAAA,EAAA;AACA;AACA,eAAA,KAAA,GAAA,MAAA,CAAA,QAAA,CAAA,GAAA,CAAA,CAFA,CAEA;AACA,SAHA,MAGA;AACA;AACA,eAAA,KAAA,GAAA;AACA,YAAA,IAAA,EAAA,EADA;AAEA,YAAA,MAAA,EAAA,EAFA;AAGA,YAAA,KAAA,EAAA,EAHA;AAIA,YAAA,UAAA,EAAA;AAJA,WAAA;AAMA,eAAA,KAAA,CAAA,OAAA,CAAA,KAAA;AACA;AACA,OAfA;AAgBA,MAAA,IAAA,EAAA;AAhBA;AADA;AAnEA,CAAA","sourcesContent":["<template>\r\n  <v-card>\r\n    <v-card-title>\r\n      <span class=\"headline\" v-text=\"isEdit ? '修改品牌' : '新增品牌'\"></span>\r\n    </v-card-title>\r\n    <v-divider/>\r\n    <v-card-text class=\"px-3\">\r\n      <v-form v-model=\"valid\" ref=\"heima88\">\r\n        <v-container grid-list-md>\r\n          <v-layout wrap>\r\n            <v-flex class=\"md6\">\r\n              <v-text-field v-model=\"brand.name\" label=\"品牌名称\" required :rules=\"nameRules\"/>\r\n            </v-flex>\r\n            <v-flex class=\"md6\">\r\n              <v-text-field v-model=\"brand.letter\" label=\"品牌首字母\" required :rules=\"letterRules\"/>\r\n            </v-flex>\r\n            <v-flex>\r\n              <v-cascader\r\n                url=\"/item/category/of/parent\"\r\n                multiple\r\n                required\r\n                v-model=\"brand.categories\"\r\n                label=\"商品分类\"/>\r\n            </v-flex>\r\n          </v-layout>\r\n          <v-layout row>\r\n            <v-flex md4>\r\n              <span class=\"subheading font-weight-thin\">品牌LOGO：</span>\r\n            </v-flex>\r\n            <v-flex>\r\n              <v-upload v-model=\"brand.image\" :multiple=\"false\" :pic-width=\"250\" :pic-height=\"90\"\r\n                        url=\"/upload/signature\" need-signature/>\r\n            </v-flex>\r\n          </v-layout>\r\n        </v-container>\r\n      </v-form>\r\n    </v-card-text>\r\n    <v-card-actions>\r\n      <v-spacer/>\r\n      <v-btn depressed  small @click=\"submit\">提交</v-btn>\r\n      <v-btn depressed small @click=\"clear\">重置</v-btn>\r\n      <v-btn depressed  small @click=\"close\">关闭</v-btn>\r\n    </v-card-actions>\r\n  </v-card>\r\n\r\n</template>\r\n\r\n<script>\r\n  export default {\r\n    name: \"brand-form\",\r\n    props: { //props中所有给属性，存在的意义为：等待父组件传值\r\n      oldBrand: {\r\n        type: Object\r\n      },\r\n      isEdit: {\r\n        type: Boolean,\r\n        default: false\r\n      }\r\n    },\r\n    data() {\r\n      return {\r\n        valid: false, // 表单校验结果标记\r\n        brand: {\r\n          name: '', // 品牌名称\r\n          letter: '', // 品牌首字母\r\n          image: '',// 品牌logo\r\n          categories: [], // 品牌所属的商品分类数组\r\n        },\r\n        nameRules: [\r\n          v => !!v || \"品牌名称不能为空\",\r\n          v => /^.{2,}$/.test(v) || \"品牌名称至少2位\"\r\n        ],\r\n        letterRules: [\r\n          v => !!v || \"首字母不能为空\",\r\n          v => /^[a-zA-Z]$/.test(v) || \"品牌字母只能是1个字母\"\r\n        ]\r\n      }\r\n    },\r\n    methods: {\r\n      submit() {\r\n        // 表单校验\r\n        if (this.$refs.heima88.validate()) {\r\n          // 定义一个请求参数对象，通过解构表达式来获取brand中的属性\r\n          const {categories, letter, ...params} = this.brand;\r\n          // 数据库中只要保存分类的id即可，因此我们对categories的值进行处理,只保留id，并转为字符串\r\n          params.cids = categories.map(c => c.id).join(\",\");\r\n          // 将字母都处理为大写\r\n          params.letter = letter.toUpperCase();\r\n          // 将数据提交到后台\r\n          // this.$http.post('/item/brand', this.$qs.stringify(params))\r\n          this.$http({\r\n            method: this.isEdit ? 'put' : 'post',\r\n            url: '/item/brand',\r\n            data: this.$qs.stringify(params) //this.$qs工具负责把对象转换为查询参数格式\r\n          }).then(() => {\r\n            // 关闭窗口\r\n            this.$emit(\"close\");\r\n            this.$message.success(\"保存成功！\");\r\n          })\r\n            .catch(() => {\r\n              this.$message.error(\"保存失败！\");\r\n            });\r\n        }\r\n      },\r\n      clear() {\r\n        // 重置表单\r\n        this.$refs.heima88.reset();\r\n        // 需要手动清空商品分类\r\n        this.categories = [];\r\n      },\r\n      close(){\r\n        //$emit表示调用父传递给子的方法\r\n        this.$emit(\"close\");\r\n      }\r\n    },\r\n    watch: {\r\n      oldBrand: {// 监控oldBrand的变化\r\n        handler(val) {\r\n          if (val) {\r\n            // 注意不要直接复制，否则这边的修改会影响到父组件的数据，copy属性即可\r\n            this.brand = Object.deepCopy(val);//相当于java中clone\r\n          } else {\r\n            // 为空，初始化brand\r\n            this.brand = {\r\n              name: '',\r\n              letter: '',\r\n              image: '',\r\n              categories: [],\r\n            };\r\n            this.$refs.heima88.reset();\r\n          }\r\n        },\r\n        deep: true\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n"],"sourceRoot":"src/views/item"}]}